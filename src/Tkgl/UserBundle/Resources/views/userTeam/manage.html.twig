{% extends "::first.html.twig" %}
{% block body %}
    <div class="clearfix">
        <h4><i class="icon-th-list"></i> User teams  | <a href="{{path('team_new')}}" title="Add new team" class="ajaxLink"> Add</a></h4>
    </div>
    <div class="row-fluid">
        <div class="span5">
            {{ include(
    'TkglUserBundle:userTeam:_list.html.twig',
    { 'teams': teams }
) }}            
        </div>

        <div id="divTopMiddle" class="span6">    
        </div>        
    </div>

    <script type="text/javascript">

        $(document).ready(function() {

            $(".ajaxLink").live('click', function(e) {
                e.preventDefault();
                $.ajax({
                    type: 'GET',
                    url: this.href,
                    data: {},
                    success: function(data) {
                        $("#divTopMiddle").html(data);
                    }
                });
            });

            var submittedForm = null;
            $('form').live('submit', function(e) {
                e.preventDefault();
                submittedForm = $(this);
                postForm(submittedForm, function(response) {
                    if (response.success) {
                        alert('done');
                    }
                });
            });



        });

        function postForm($form, callback) {
            // Get all form values    
            var values = $form.serialize();

            // Throw the form values to the server!    
            $.ajax({
                type: $form.attr('method'),
                url: $form.attr('action'),
                data: values,
                success: function(data) {
                    callback(data);
                }
            });
        }

    </script>

{% endblock %}