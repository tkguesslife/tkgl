<?php

namespace Tkgl\CoreBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;

/**
 * @ORM\Entity
 * @ORM\Table(name="appointment")
 * @ORM\HasLifecycleCallbacks
 * @author Tiko Banyini <admin@tkbean.co.za>
 */
class Appointment extends BaseAuditableEntity {

  /**
   * @ORM\Id
   * @ORM\Column(type="integer")
   * @ORM\GeneratedValue(strategy="AUTO")
   */
  protected $id;

  /**
   * @ORM\Column(type="text", nullable=true)   
   */
  protected $attendees;

  /**
   * @ORM\Column(type="string", length=255)   
   * @Assert\NotBlank(message="Subject is required.")
   */
  protected $subject;

  /**
   * @ORM\Column(type="string", length=255, nullable=true)   
   */
  protected $location;

  /**
   * @ORM\Column(type="text", nullable=true)
   */
  protected $appointmentDescription;

  /**
   * @ORM\Column(type="datetime")
   * @Assert\NotBlank(message="Start date and time is required.")
   */
  protected $startTime;

  /**
   * @ORM\Column(type="datetime")
   */
  protected $endTime;

  /**
   * @ORM\Column(type="integer", nullable=true)
   */
  protected $duration;

  /**
   * @ORM\ManyToOne(targetEntity="Tkgl\CoreBundle\Entity\AppointmentStatus")
   * @ORM\JoinColumn(name="appointment_status_id", referencedColumnName="id")   
   */
  protected $appointmentStatus;

  /**
   * @ORM\PrePersist
   */
  public function doStuffOnPrePersist() {
    parent::doStuffOnPrePersist();
  }

  /**
   * @ORM\PreUpdate
   */
  public function doStuffOnPreUpdate() {
    parent::doStuffOnPreUpdate();
  }

}
